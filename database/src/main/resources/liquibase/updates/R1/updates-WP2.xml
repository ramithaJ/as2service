<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
<changeSet author="gphaniraj" id="WP2-1">
<sql>
CREATE SEQUENCE ARTICLES_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-2">
<sql>
CREATE SEQUENCE JOURNAL_ALERTS_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-3">
<sql>
CREATE SEQUENCE ARTICLE_AUTHOR_ASSIGNMENT_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-4">
<sql>
CREATE SEQUENCE SAVED_ORDERS_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-5">
<sql>
CREATE SEQUENCE ORDERS_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-6">
<sql>
CREATE SEQUENCE INVITATION_LOG_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-7">
<sql>
CREATE SEQUENCE COAUTHOR_REQUESTS_OOORDERS_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-8">
<sql>
CREATE TABLE ARTICLES
(
ARTICLE_ID NUMBER DEFAULT ARTICLES_SEQ.NEXTVAL,
DH_ID NUMBER,
JOURNAL_ID NUMBER,
PROD_TRK_PATH_ARTICLE CHAR(1),
PUBLICATION_STATUS VARCHAR2(50),
NOTES CLOB,
RESET_LICENSE_FLG CHAR(1),
LICENSE_VERIFICATION_FLG CHAR(1),
USER_ID_SIGN_LICENSE NUMBER,
CREATED_DATE DATE,
CREATED_BY NUMBER,
UPDATED_DATE DATE,
LAST_UPDATED_IN_AS_FROM_MASTER DATE,
UPDATED_BY NUMBER
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-9">
<sql>
ALTER TABLE ARTICLES ADD CONSTRAINT ARTICLES_PK PRIMARY KEY(ARTICLE_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-10">
<sql>
ALTER TABLE ARTICLES ADD CONSTRAINT ARTICLES_FK FOREIGN KEY(JOURNAL_ID) REFERENCES JOURNALS(JOURNAL_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-11">
<sql>
CREATE TABLE ARTICLE_ROLES
(ARTICLE_ROLE_CD VARCHAR2(15),
ARTICLE_ROLE_NAME VARCHAR2(100),
DESCRIPTION VARCHAR2(250),
CREATED_BY NUMBER,
CREATED_DATE DATE,
UPDATED_BY NUMBER,
UPDATED_DATE DATE,
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-12">
<sql>
ALTER TABLE ARTICLE_ROLES ADD CONSTRAINT ARTICLE_ROLES_PK PRIMARY KEY(ARTICLE_ROLE_CD);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-13">
<sql>
ALTER TABLE JOURNALS DROP (JOU_TITLE,JOU_INVITED_IN_AS,CREATED_BY,CREATED_DATE,UPDATED_BY,UPDATED_DATE);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-14">
<sql>
ALTER TABLE JOURNALS ADD (SETUP_STATE_IN_AS VARCHAR2(100),NICKNAME VARCHAR2(250),TITLE_DISP_OOO VARCHAR2(250),DISCONTINUED CHAR(1),INVITED_IN_AS CHAR(1),INVITED_IN_AS_START_DATE DATE,INVITED_IN_AS_END_DATE DATE,DISP_FOR_OO_ORDERING CHAR(1),PROD_TRK_PATH CHAR(1),PER_FREE_ACCESS_TO_ART_TO_COAU CHAR(1),ALLW_COAU_SEE_ART_PRD_STAGES CHAR(1),PER_COAU_TO_SUBS_REVIEW_PROOFS CHAR(1),ALLOW_TO_ADD_COLLEAGUES CHAR(1),ALLOW_ARTICLES_PRD_NONPRD_PATH CHAR(1),COLLEC_A_CONFLI_OF_INTRST_FORM CHAR(1),COAUTH_RECEIVE_INVITATION CHAR(1),DISP_OR_EMAIL_MRKTNG_TO_USR CHAR(1),DISP_OR_EMAIL_SURVEY_TO_USR CHAR(1),PER_FREE_ACCESS_ART_TO_CORAU CHAR(1),CREATED_DATE DATE,CREATED_BY NUMBER,UPDATED_DATE DATE,UPDATED_BY NUMBER);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-15">
<sql>
CREATE TABLE JOURNAL_ALERTS
(
JOU_ALERT_ID NUMBER DEFAULT JOURNAL_ALERTS_SEQ.NEXTVAL,
JOURNAL_ID NUMBER,
ALERT_CD VARCHAR2(15),
ALERT_CD_FLG CHAR(1),
CREATED_BY NUMBER,
CREATED_DATE DATE,
UPDATED_BY NUMBER,
UPDATED_DATE DATE
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-16">
<sql>
ALTER TABLE JOURNAL_ALERTS ADD CONSTRAINT JOURNAL_ALERTS_PK PRIMARY KEY(JOU_ALERT_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-17">
<sql>
ALTER TABLE JOURNAL_ALERTS ADD CONSTRAINT JOURNAL_ALERTS_FK FOREIGN KEY(JOURNAL_ID) REFERENCES JOURNALS(JOURNAL_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-18">
<sql>
ALTER TABLE JOURNAL_ALERTS ADD CONSTRAINT JOURNAL_ALERTS_FK2 FOREIGN KEY(ALERT_CD) REFERENCES ALERTS(ALERT_CD);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-19">
<sql>
CREATE TABLE ARTICLE_AUTHOR_ASSIGNMENT
(
ARTICLE_AUTH_ID NUMBER DEFAULT ARTICLE_AUTHOR_ASSIGNMENT_SEQ.NEXTVAL,
USER_ID NUMBER,
EMAIL_ADDR VARCHAR2(250),
ARTICLE_ID NUMBER,
ARTICLE_ROLE_CD VARCHAR2(15),
DATE_ACTIVATED DATE,
CREATED_BY NUMBER,
UPDATED_DATE DATE,
UPDATED_BY NUMBER
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-20">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT ADD CONSTRAINT ARTICLE_AUTHOR_ASSIGNMENT_PK PRIMARY KEY(ARTICLE_AUTH_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-21">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT ADD CONSTRAINT ARTICLE_AUTHOR_ASSIGNMENT_FK FOREIGN KEY(USER_ID) REFERENCES USER_PROFILE(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-22">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT ADD CONSTRAINT ARTICLE_AUTHOR_ASSIGNMENT_FK2 FOREIGN KEY(ARTICLE_ID) REFERENCES ARTICLES(ARTICLE_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-23">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT ADD CONSTRAINT ARTICLE_AUTHOR_ASSIGNMENT_FK3 FOREIGN KEY(ARTICLE_ROLE_CD) REFERENCES ARTICLE_ROLES(ARTICLE_ROLE_CD);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-24">
<sql>
ALTER TABLE ARTICLES  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-25">
<sql>
ALTER TABLE ARTICLES ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-26">
<sql>
ALTER TABLE ARTICLE_ROLES  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-27">
<sql>
ALTER TABLE ARTICLE_ROLES ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-28">
<sql>
ALTER TABLE JOURNALS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-29">
<sql>
ALTER TABLE JOURNALS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-30">
<sql>
ALTER TABLE JOURNAL_ALERTS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-31">
<sql>
ALTER TABLE JOURNAL_ALERTS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-32">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-33">
<sql>
ALTER TABLE ARTICLE_AUTHOR_ASSIGNMENT ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-34">
<sql>
CREATE TABLE SAVED_ORDERS
(
ORDER_ID NUMBER DEFAULT SAVED_ORDERS_SEQ.NEXTVAL,
ARTICLE_ID NUMBER,
USER_ID NUMBER,
ORDER_OBJECT CLOB,
CREATED_DATE DATE,
CREATED_BY NUMBER,
UPDATED_DATE DATE,
UPDATED_BY NUMBER
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-35">
<sql>
ALTER TABLE SAVED_ORDERS ADD CONSTRAINT SAVED_ORDERS_PK PRIMARY KEY(ORDER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-36">
<sql>
ALTER TABLE SAVED_ORDERS ADD CONSTRAINT SAVED_ORDERS_FK FOREIGN KEY(USER_ID) REFERENCES USER_PROFILE(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-37">
<sql>
ALTER TABLE SAVED_ORDERS ADD CONSTRAINT SAVED_ORDERS_FK2 FOREIGN KEY(ARTICLE_ID) REFERENCES ARTICLES(ARTICLE_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-38">
<sql>
CREATE TABLE ORDERS(
ORDER_ID NUMBER DEFAULT ORDERS_SEQ.NEXTVAL ,
ARTICLE_AUTH_ID NUMBER,
ORDER_TYPE VARCHAR2(15),
OO_OA_FLG CHAR(2),
ORDER_STATUS VARCHAR2(25),
DOWNSTREAMAPP_ORDER_ID NUMBER,
CREATED_DATE DATE,
CREATED_BY NUMBER,
UPDATED_DATE DATE,
UPDATED_BY NUMBER
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-39">
<sql>
ALTER TABLE ORDERS ADD CONSTRAINT ORDERS_PK PRIMARY KEY(ORDER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-40">
<sql>
ALTER TABLE ORDERS ADD CONSTRAINT ORDERS_FK FOREIGN KEY(ARTICLE_AUTH_ID) REFERENCES ARTICLE_AUTHOR_ASSIGNMENT(ARTICLE_AUTH_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-41">
<sql>
CREATE TABLE INVITATION_LOG
(INVITATION_ID NUMBER DEFAULT INVITATION_LOG_SEQ.NEXTVAL,
USER_ID NUMBER,
EMAIL_ADDR VARCHAR2(250),
ARTICLE_ID NUMBER,
SENT_DATE DATE,
SENT_BY NUMBER);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-42">
<sql>
ALTER TABLE INVITATION_LOG ADD CONSTRAINT INVITATION_LOG_PK PRIMARY KEY(INVITATION_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-43">
<sql>
ALTER TABLE INVITATION_LOG ADD CONSTRAINT INVITATION_LOG_FK FOREIGN KEY(USER_ID) REFERENCES USER_PROFILE(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-44">
<sql>
ALTER TABLE INVITATION_LOG ADD CONSTRAINT INVITATION_LOG_FK2 FOREIGN KEY(ARTICLE_ID) REFERENCES ARTICLES(ARTICLE_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-45">
<sql>
CREATE TABLE COAUTHOR_REQUESTS_OOORDERS
(
REQUEST_ID NUMBER DEFAULT COAUTHOR_REQUESTS_OOORDERS_SEQ.NEXTVAL,
ARTICLE_AUTH_ID NUMBER,
CREATED_DATE DATE,
CREATED_BY NUMBER,
UPDATED_DATE DATE,
UPDATED_BY NUMBER
);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-46">
<sql>
ALTER TABLE COAUTHOR_REQUESTS_OOORDERS ADD CONSTRAINT COAUTHOR_REQUESTED_OOORDERS_PK PRIMARY KEY(REQUEST_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-47">
<sql>
ALTER TABLE COAUTHOR_REQUESTS_OOORDERS ADD CONSTRAINT COAUTHOR_REQUESTS_OOORDERS_FK FOREIGN KEY(ARTICLE_AUTH_ID) REFERENCES ARTICLE_AUTHOR_ASSIGNMENT(ARTICLE_AUTH_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-48">
<sql>
ALTER TABLE AUDIT_DETAILS DROP (OLD_VAL,NEW_VAL,CREATED_DATE,CREATED_BY);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-49">
<sql>
ALTER TABLE AUDIT_DETAILS ADD (OBJECT_ID NUMBER,OBJECT_TYPE_CD VARCHAR2(15),OLD_VAL VARCHAR2(250),NEW_VAL VARCHAR2(250),CREATED_DATE DATE,CREATED_BY NUMBER);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-50">
<sql>
ALTER TABLE AUDIT_DETAILS ADD CONSTRAINT AUDIT_DETAILS_FK3 FOREIGN KEY(OBJECT_TYPE_CD) REFERENCES OBJECT_TYPES(OBJECT_TYPE_CD);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-51">
<sql>
ALTER TABLE ALERTS DROP(CREATED_DATE,CREATED_BY,UPDATED_DATE,UPDATED_BY);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-52">
<sql>
ALTER TABLE ALERTS ADD(ALERT_TYPE VARCHAR2(15),CREATED_DATE DATE,CREATED_BY NUMBER,UPDATED_DATE DATE,UPDATED_BY NUMBER);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-53">
<sql>
ALTER TABLE ALERTS ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-54">
<sql>
ALTER TABLE ALERTS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-55">
<sql>
ALTER TABLE AUDIT_DETAILS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-56">
<sql>
ALTER TABLE COAUTHOR_REQUESTS_OOORDERS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-57">
<sql>
ALTER TABLE COAUTHOR_REQUESTS_OOORDERS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-58">
<sql>
ALTER TABLE ORDERS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-59">
<sql>
ALTER TABLE ORDERS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-60">
<sql>
ALTER TABLE SAVED_ORDERS  ADD FOREIGN KEY(CREATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

<changeSet author="gphaniraj" id="WP2-61">
<sql>
ALTER TABLE SAVED_ORDERS ADD  FOREIGN KEY(UPDATED_BY) REFERENCES USERS(USER_ID);
</sql>
</changeSet>

</databaseChangeLog>
